@model List<NhaSach.Web.Models.Sanpham>
@{
    ViewData["Title"] = "Kết quả tìm kiếm";
    var q = ViewBag.Q as string ?? "";
    var bv = ViewBag.BaiViet as List<NhaSach.Web.Models.Baiviet> ?? new();
    var sk = ViewBag.SuKien as List<NhaSach.Web.Models.Sukien> ?? new();
}
<h2 class="mb-3">Kết quả cho: <em>@q</em></h2>

@if (!Model.Any() && !bv.Any() && !sk.Any())
{
    <div class="alert alert-info">Không tìm thấy kết quả.</div>
}
else
{
    <h4 class="mt-3">Sản phẩm</h4>
    <div class="row g-3">
        @foreach (var sp in Model)
        {
            <div class="col-6 col-md-3">
                @await Html.PartialAsync("_SanphamCard", sp)
            </div>
        }
    </div>

    <h4 class="mt-4">Bài viết</h4>
    <div class="list-group">
        @foreach (var b in bv)
        {
            <a class="list-group-item list-group-item-action"
               asp-controller="Blog" asp-action="ChiTiet" asp-route-id="@b.Baiviet_Id">
                <strong>@b.Tieude_Baiviet</strong>
                <div class="small text-muted">@b.Tomtat_Baiviet</div>
            </a>
        }
    </div>

    <h4 class="mt-4">Sự kiện</h4>
    @if (!sk.Any())
    {
        <div class="text-muted">Không có sự kiện phù hợp.</div>
    }
    else
    {
        <ul class="list-group">
            @foreach (var e in sk)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <a asp-controller="Sukien" asp-action="ChiTiet" asp-route-id="@e.Sukien_Id">
                            <strong>@e.Tieude_Sukien</strong>
                        </a>
                        <div class="small text-muted">@e.Diadiem_Sukien</div>
                    </div>
                    <span class="badge bg-primary rounded-pill">
                        @e.BatDau_Sukien.ToVNString()
                    </span>
                </li>
            }
        </ul>
    }
}